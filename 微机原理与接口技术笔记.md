# 一.8086微机系统
## 概述
### 微机系统的工作原理
微机的整个工作过程就是**不断地取指令和执行指令**的过程，其基本原理就是**存储程序和程序控制**。
### 微机系统的硬件组成
硬件结构依然采用冯诺依曼体系。

1. 运算器
2. 控制器
3. 存储器
4. 输入设备
5. 输出设备

现代微机组成：

1. 微处理器（核心）：包含控制器和运算器
2. 协处理器：减轻微处理器的负担，比如数字协处理器，图形协处理器。
3. 内存储器：存放正在运行的程序和用到的数据等。
4. 总线控制逻辑：控制数据的传输。
5. 外存储器：主存的后备和补充。

## 8086微处理器的结构
8086是16位微处理器，有16位数据线和20位地址线，所以可以寻址的内存空间地址位2^20B即为1MB，I/O地址空间为2^16B，64KB。
### 8086的内部结构
#### 执行部件（EU）
- EU：ALU（8/16位计算）、8个通用寄存器、标志寄存器、控制电路。
- EU负责指令的执行，从BIU的指令队列取指令，指令执行后向BIU送回计算结果，同时将运算结果的状态特征保存到标志寄存器。
- EU通过BIU与外部系统相连。
#### 总线接口部件（BIU）
- BIU：段寄存器、IP、地址加法器、内部暂存器、指令队列缓冲器、总线控制逻辑。
- 负责CPU与存储器、外设之间的数据传送。
- BIU完成的操作：

    1. 取指令送给指令队列。
    2. 配和EU从指定单元取数据。
    3. 将数据或操作结果传送给指定单元。

PS：微处理器为什么要这么设计，为什么需要这些暂存器，缓冲器，背后的设计思路是值得思考的。
### 8086工作模式
1. 最小模式（单处理器模式）

适用于较小规模的系统。只有一片CPU，所连接的存储器容量不大、芯片不多、外设不多。系统控制总线可以由CPU控制总线供给，使得系统中的总线控制电路减到最少。

2. 最大模式（相对于最小模式而言，适用于中、大型规模的系统）

除了主处理器8086以外，还有协处理器（8087算术协处理器或8089输入/输出协处理器）。最大模式可构成多处理器系统，系统中所需要的控制信号由总线控制器8288提供。

PS：为什么会有这两种模式？
因为在不同的应用场合中，对于存储器和外设规模的要求不同，需要两种模式来适应不同场合的需求。
## 8086引脚特性（暂不写）

## 8086微机系统的总线时序
微机系统的所有操作都按统一的时钟节拍进行。CPU执行指令涉及三个周期：

1. 时钟周期：微机系统最小的工作单元。
2. 总线周期：利用总线完成一次读/写操作所需要的时间。
3. 指令周期：执行一条指令所需要的时间。（取指令，分析指令、执行指令）。
4. 三者关系：指令周期>= 总线周期>=时钟周期

### 最小模式下的总线周期时序（后面再完善）
1. 判读读写操作
2. 获取地址信息
3. 锁存地址地址信息，以便复用
4. 发出读写操作信号
### 最大模式下的总线周期时序

## 8086微机系统的硬件组成与组织

### 8086微机系统的存储器组织
#### 存储空间
- 低地址在前，高地址在后。
- 存储器分奇偶存储体，读写从偶地址开始。

#### 存储器的分段管理
1. 段地址：
2. 偏移地址：把内存地址分为若干段，每段有一些存储单元构成。用段地址指出是哪一段，偏移地址标明是段中的哪一个单元
3. 逻辑地址：逻辑地址是用户编程时使用的地址，记为：段地址：偏移地址
4. 物理地址：存储器实际地址，=段地址x10H+偏移地址。

## 思考题
### 如何实现地址线与数据线的复用？
1. CPU先将20位地址信号送上地址线A0~A19。
2. LEA信号生成后将20位地址信号锁存在锁存器中。
3. CPU内部进行引脚切换到数据线，部分切换到状态输出线。
4. 在DT/R，DEN作用下，选通数据线上的收发器使外部数据进入CPU（读入），或将CPU内部数据送到外部数据线上（写入）。
# 二.8086寻址方式与指令系统

## 寻址方式

## 指令系统

# 8086汇编语言

# 存储器

# 输入/输出接口

# 。。。
